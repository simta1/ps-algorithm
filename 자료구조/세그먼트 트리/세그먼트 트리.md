[카테고리](/README.md)
## SegmentTree (point update & range query)
```cpp
template<typename T, T (*op)(const T&, const T&), T (*e)()>
class SegmentTree {
private:
    int n, sz, log;
    vector<T> tree;

    static int pow2GE(int n) { assert(n); return 1 << 32 - __builtin_clz(n) - !(n & ~-n); }

public:
    SegmentTree() = default;
    SegmentTree(int n) : SegmentTree(vector<T>(n, e())) {}
    SegmentTree(const vector<T>& v) : n(v.size()) {
        sz = pow2GE(n);
        tree = vector<T>(sz << 1, e());
        for (int i = 0; i < n; i++) tree[sz + i] = v[i];
        for (int i = sz - 1; i >= 1; i--) tree[i] = op(tree[i << 1], tree[i << 1 | 1]); 
    }

    void updateChange(int i, T val) { // 1-based
        assert(1 <= i && i <= n);
        tree[--i |= sz] = val;
        while (i >>= 1) tree[i] = op(tree[i << 1], tree[i << 1 | 1]); 
    }

    T query(int l, int r) const { // 1-based // [l:r]
        assert(1 <= l && l <= r && r <= n);
        T resL = e(), resR = e();
        for (--l |= sz, --r |= sz; l <= r; l >>= 1, r >>= 1) {
            if (l & 1) resL = op(resL, tree[l++]);
            if (~r & 1) resR = op(tree[r--], resR);
        }
        return op(resL, resR);
    }
};
```
### 시간복잡도
update $O(\log{N})$   
query $O(\log{N})$   

### 사용관련
[구간 합 구하기](https://www.acmicpc.net/problem/2042) 예시코드
```cpp
// https://www.acmicpc.net/problem/2042
ll sum(const ll &a, const ll &b) { return a + b; }

ll zero() { return 0; }

int main() {
    cin.tie(0) -> sync_with_stdio(0);

    int n, m, k;
    cin >> n >> m >> k;

    vector<ll> v(n);
    for (auto &e : v) cin >> e;

    SegmentTree<ll, sum, zero> seg(v);

    for (m += k; m--;) {
        ll a, b, c;
        cin >> a >> b >> c;
        
        if (a == 1) seg.updateChange(b, c);
        else cout << seg.query(b, c) << "\n";
    }

    return 0;
}
```

최솟값 세그트리 선언예시   
아쉽게도 `std::min`은 `op`에 대입이 안 돼서 직접 선언해야 함   
```cpp
int min(const int &a, const int &b) { return a < b ? a : b; }
SegmentTree<int, min, numeric_limits<int>::max> seg(v);
```

### 백준 문제
[구간 합 구하기](https://www.acmicpc.net/problem/2042)   
[최솟값 찾기](https://www.acmicpc.net/problem/11003)   

### 참고문헌
https://book.acmicpc.net/ds/segment-tree   
https://blog.naver.com/jinhan814/222145041843   
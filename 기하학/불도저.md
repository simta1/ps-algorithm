[카테고리](/README.md)
## 불도저 트릭(Rotating Sweep Line Technique)
### [기하학 헤더](/기하학/Geometry%20Header.md)
<details>
<summary>Point</summary>

```cpp
template <typename T>
struct Point {
    T x, y;
    
    bool operator<(const Point &other) const { return tie(x, y) < tie(other.x, other.y); }
    Point operator-(const Point &other) const { return {x - other.x, y - other.y}; }
};
```
</details>

### 불도저
```cpp
template <typename T>
struct SlopeWithIdx {
    int i, j; // idx
    T dx, dy;

    SlopeWithIdx(int i, int j, Point<T> dir) : i(i), j(j), dx(dir.x), dy(dir.y) {}
    bool operator<(const SlopeWithIdx &other) const { return tuple<T, int, int>{dy * other.dx, i, j} < tuple<T, int, int>{other.dy * dx, other.i, other.j}; }
    bool operator==(const SlopeWithIdx &other) const { return dy * other.dx == other.dy * dx; }
};

template <typename T>
void bulldozer(vector<Point<T> > &points) {
    int n = points.size();
    vector<int> pos(n);
    iota(pos.begin(), pos.end(), 0);

    sort(points.begin(), points.end());

    vector<SlopeWithIdx<T> > slopes;
    slopes.reserve(n * (n - 1) / 2);
    for (int i = 0; i < n; i++) for (int j = i + 1; j < n; j++) slopes.emplace_back(i, j, points[j] - points[i]);
    sort(slopes.begin(), slopes.end());

    for (int i = 0, j; i < slopes.size(); i = j) {
        for (j = i; j < slopes.size() && slopes[i] == slopes[j]; j++) {
            int &idx1 = pos[slopes[j].i], &idx2 = pos[slopes[j].j]; // point id
            swap(idx1, idx2);
            swap(points[idx1], points[idx2]);
        }
        // slopes[i]의 기울기를 기준으로 정렬되어있음
        // 코드
    }
}
```
### 시간복잡도
$O(N^2 \log{N})$   

### 구현 주의사항
slopes에 들어가 있는 i, j는 초기 인덱스고 이후의 swap정보를 반영하지 못하기 때문에 pos배열에 swap정보를 저장해서 `pos[i]`, `pos[j]`로 사용   

$\dfrac{dy}{dx} < \dfrac{\text{other.}dy}{\text{other.}dx} $를 $dy \times \text{other.}dx < \text{other.}dy \times dx $로 계산하기 위해서 slopes의 dx는 무조건 0 이상이어야 하고, 이를 위해서 points의 처음 정렬 기준을 x좌표 오름차순으로 함   

### 문제
[최대삼각형, 최소삼각형](https://www.acmicpc.net/problem/9484)   
[빨간점, 파란점](https://www.acmicpc.net/problem/3121)   

### 참고링크
https://justicehui.github.io/hard-algorithm/2022/03/30/rotate-sweep-line/   